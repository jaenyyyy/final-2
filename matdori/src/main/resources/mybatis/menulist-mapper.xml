<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="menuByReservation">
	<insert id="insert">
		insert into menu_list_by_rez
		(rez_no, menu_no, menu_qty) 
		values
		(#{rezNo}, #{menuNo}, #{menuQty})
	</insert>
	<!-- 단일 조회 -->
	<select id="selectOne" resultType="MenuByReservationDto">
		select * from menu_list_by_rez where menu_no=#{menuNo}
	</select>
	
	<!-- 예약번호별 메뉴조회 -->
	<select id ="rezMenus" resultType="MenuByReservationDto">
		select * from menu_list_by_rez where rez_no = #{rezNo}
	</select>
	
	<!-- 메뉴 정보 조회 -->
	<select id="menuInfo" resultType="MenuInfoVO">
		select 
		m.menu_no, m.menu_name, mlbr.menu_qty, m.menu_price 
		from menu m 
		inner join menu_list_by_rez mlbr on mlbr.menu_no = m.menu_no 
		where mlbr.rez_no = #{rezNo}
	</select>
	
</mapper>